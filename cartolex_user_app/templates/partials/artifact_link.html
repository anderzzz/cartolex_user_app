<!-- Link Artifact Renderer (for large file downloads) -->
<div class="artifact-content">
    <div class="flex items-center justify-between mb-4 pb-3 border-b esevioz-border-dominant">
        <div>
            <h4 class="text-lg font-medium esevioz-text">{{ artifact.key }}</h4>
            <p class="text-sm esevioz-text opacity-60 mt-1">{{ artifact.description }}</p>
        </div>
        <span class="px-3 py-1 text-xs font-medium rounded esevioz-badge-info">Download</span>
    </div>

    <!-- Download Card -->
    <div class="esevioz-card rounded-lg p-6 border-2 esevioz-border-dominant hover:border-pine-400 transition-colors">
        <div class="flex items-start">
            <!-- File Icon -->
            <div class="flex-shrink-0">
                <svg class="h-16 w-16 esevioz-text opacity-75" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
                </svg>
            </div>

            <!-- File Details -->
            <div class="ml-6 flex-1">
                <h5 class="text-lg font-medium esevioz-text mb-2">
                    {{ artifact.data.link_text or artifact.key }}
                </h5>

                <!-- Metadata Grid -->
                <div class="grid grid-cols-2 gap-4 mb-4 text-sm">
                    {% if artifact.metadata.format %}
                    <div>
                        <span class="esevioz-text opacity-60">Format:</span>
                        <span class="esevioz-text font-medium ml-2 uppercase">{{ artifact.metadata.format }}</span>
                    </div>
                    {% endif %}

                    {% if artifact.metadata.size_mb %}
                    <div>
                        <span class="esevioz-text opacity-60">Size:</span>
                        <span class="esevioz-text font-medium ml-2">{{ artifact.metadata.size_mb }} MB</span>
                    </div>
                    {% endif %}

                    {% if artifact.metadata.content_type %}
                    <div>
                        <span class="esevioz-text opacity-60">Type:</span>
                        <span class="esevioz-text font-medium ml-2 text-xs font-mono">{{ artifact.metadata.content_type }}</span>
                    </div>
                    {% endif %}

                    {% if artifact.metadata.expires_at %}
                    <div>
                        <span class="esevioz-text opacity-60">Expires:</span>
                        <span class="esevioz-text font-medium ml-2 text-xs">{{ artifact.metadata.expires_at }}</span>
                    </div>
                    {% endif %}
                </div>

                <!-- Download Button -->
                <a href="{{ artifact.data.link }}"
                   download
                   target="_blank"
                   class="inline-flex items-center px-6 py-3 text-sm font-medium rounded-md esevioz-btn-primary hover:shadow-lg transition-shadow">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                    Download File
                </a>

                <!-- Expiration Warning -->
                {% if artifact.metadata.expires_at %}
                <p class="mt-3 text-xs esevioz-text opacity-60 flex items-start">
                    <svg class="w-4 h-4 mr-1 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                    </svg>
                    <span>This download link will expire at {{ artifact.metadata.expires_at }}. Save the file soon.</span>
                </p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Additional Metadata -->
    {% if artifact.metadata and artifact.metadata.items()|list|length > 4 %}
    <div class="mt-6 pt-4 border-t esevioz-border-dominant">
        <details class="text-sm">
            <summary class="cursor-pointer esevioz-text opacity-75 hover:opacity-100 font-medium">Full Metadata</summary>
            <div class="mt-2 esevioz-card rounded p-3">
                <pre class="text-xs font-mono esevioz-text opacity-75 overflow-x-auto">{{ artifact.metadata | tojson(indent=2) }}</pre>
            </div>
        </details>
    </div>
    {% endif %}
</div>
